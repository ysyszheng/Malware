import numpy as np
from sklearn.decomposition import PCA

def pca(X, percent):
  cov_mat = np.cov(X.T)

  eig_vals, _ = np.linalg.eig(cov_mat)

  tot = sum(eig_vals)
  var_exp = [(i / tot) for i in sorted(eig_vals, reverse=True)]
  cum_var_exp = np.cumsum(var_exp)
  num_of_components = np.argmax(cum_var_exp >= percent) + 1

  pca = PCA(n_components=num_of_components)
  pca.fit(X)

  new_X = pca.transform(X)
  return new_X