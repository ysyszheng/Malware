import os
from tqdm import tqdm
from bin_to_img import is_pe_file, bin_to_img


def convert(input_dir, output_dir):
    file_list = os.listdir(input_dir)
    file_list_bar = tqdm(file_list)

    for filename in file_list_bar:
        if is_pe_file(input_dir, filename):
            bin_to_img(input_dir, output_dir, filename)
        file_list_bar.set_description(f"Processing {filename}")


if __name__ == '__main__':
    input_dir = r'./data/input_file/'
    output_dir = r'./data/output_img/'
    convert(input_dir, output_dir)
