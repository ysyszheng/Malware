import numpy as np
from PIL import Image
import os
from tqdm import tqdm

if __name__ == '__main__':
  dataset = np.load('./data/malimg.npz', allow_pickle=True)
  for i in tqdm(range(len(dataset["arr"]))):
    os.makedirs(os.path.join("./data/malimg", str(dataset["arr"][i, 1])), exist_ok=True)
    image = Image.fromarray(dataset["arr"][i, 0], 'L')
    image.save(f'./data/malimg/{dataset["arr"][i, 1]}/{i}.png')